---
title: "画像生成基盤の構築形態によるコストの比較検討"
emoji: "🖼️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["AWS", "Bedrock", "EC2", "StableDiffusion", "クラウド"]
published: true
publication_name: "nislab"
---

## 私たちの研究室(Nislab)

https://nisk.doshisha.ac.jp/

---

## アドベントカレンダー　2日目～

https://nislab-advendcallender-2025.vercel.app/

---

## はじめに

近年、生成AI技術の発展により画像生成の需要は急速に増加しています。  
特に広告業界、ECサイト、エンタメ産業、画像認識研究など幅広い分野で利用されています。

一方、画像生成には計算資源が必要であり、その供給基盤としてクラウドコンピューティングの重要性が増しています。  
本記事では **AWS における画像生成基盤の構築方式によるコストの違い** を比較した研究内容を紹介します。

---

## 背景

クラウドコンピューティングとは、インターネット経由でコンピュータリソースを利用できる仕組みです。  
柔軟性・拡張性・安全性に優れており、多くの企業や研究機関で利用されています。

世界最大級のクラウドサービスである **AWS（Amazon Web Services）** では画像生成を行う方法として、主に以下の2種類が存在します。

1. **クラウドAPI型**：Amazon Bedrock を利用  
　→ 環境構築なしで即時に画像生成が可能  
2. **ユーザー構築型**：EC2 インスタンスに Stable Diffusion を導入  
　→ 利用者が構築作業を行う必要あり

本研究では、この 2 つの方式のコストを比較します。

---

## 目的

クラウドAPI型（Amazon Bedrock）とユーザー構築型（EC2）の  
**画像生成環境構築を含めた総合コスト**を比較することを目的としました。

公平な比較のため、以下の条件を統一しています。

- モデル：Stable Diffusion
- プロンプト：  
  *"a photograph of an astronaut riding on a horse"*

---

## 評価実験

### 🔧 使用サービスとモデル

#### ■ Amazon Bedrock（クラウドAPI型）
- 生成AIのフルマネージドサービス
- 複数の基盤モデル（SDXL、Titan、Claude など）を環境構築なしで利用可能
- UI から直接画像生成も可能

#### ■ Amazon EC2（ユーザー構築型）
- 仮想サーバーを起動し、GPU インスタンスで Stable Diffusion を実行
- Stable Diffusion の導入作業が必要
- 手作業のばらつきを避けるため **起動テンプレート**を作成

#### ■ モデル：Stable Diffusion
オープンソースの画像生成モデルで、API型・ユーザー構築型どちらでも利用可能。

---

## 評価指標

ユーザー構築型について、以下を評価しています。

- **構築時間**：OS 起動時間 + サーバ起動時間  
- **構築コスト**：構築時間 × 利用料金  
- **1枚目生成コスト**：構築コスト + 生成単価  

Bedrock では構築が不要なため、**生成単価のみ**評価対象としました。

---

## 結果

### 🔹 Bedrock（クラウドAPI型）
- 1枚あたり **0.08 USD**

### 🔹 EC2（ユーザー構築型）
- インスタンス：g4dn.xlarge  
　→ 0.71 USD / hour
- 1枚あたりの生成コスト：  
　**0.00108 USD**
- 構築時間の計測より、1枚目生成時点の総コストを算出

> ※換算レート：1ドル＝147.32円（2025/9/10 時点）

---

## コスト比較

### ▼ 1枚目生成時点の比較  
構築コストを含めても、ユーザー構築型の方が低コスト。

### ▼ 1000 枚生成する場合の比較

| 方式 | コスト |
|------|--------|
| クラウドAPI型（Bedrock） | **80 USD** |
| ユーザー構築型（EC2） | **1.1 USD** |

大量生成時には EC2 の優位性が際立ちます。

---

## 考察

- **ユーザー構築型（EC2）**  
  - 構築の手間はあるものの、大量生成・長期間運用において圧倒的に低コスト  
  - GPU インスタンスを使うため高い自由度を持つ

- **クラウドAPI型（Bedrock）**  
  - 環境構築が不要で、すぐ使える利便性が高い  
  - 本来は API 利用を想定しているが、UI からのテスト利用も可能  
  - 少量生成・カジュアル用途に適する

---

## 今後の展望

- Bedrock で Stable Diffusion を **時間刻みで利用できる課金方式の可能性**  
- 他モデル（Titan、Claude 3、Canvas など）でも同様の比較を実施  
- より大規模な生成タスクでのスケーリング比較も視野に入れる

---

## おわりに

本記事では **AWS における画像生成基盤の構築方式によるコスト比較** の研究内容を紹介しました。  
手軽さを重視するなら Bedrock、大量生成なら EC2 が有利という結果となりました。

アドベントカレンダーの記事として、どなたかの参考になれば幸いです。
